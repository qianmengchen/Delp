'use strict';var _slicedToArray=function(){function a(b,c){var d=[],e=!0,f=!1,g=void 0;try{for(var j,h=b[Symbol.iterator]();!(e=(j=h.next()).done)&&(d.push(j.value),!(c&&d.length===c));e=!0);}catch(k){f=!0,g=k}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw g}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var voteSet=new Set,itemMap=new Map,Dish=function(){function a(b,c,d,e){_classCallCheck(this,a),this.str=b,this.element=c,this.upVotes=d,this.downVotes=e}return _createClass(a,[{key:'getPercent',value:function getPercent(){return this.upVotes/(this.upVotes+this.downVotes)}},{key:'isNew',value:function isNew(){return 5>=this.upVotes+this.downVotes}},{key:'isPopular',value:function isPopular(){return!this.isNew()&&0.7<=this.getPercent()}}]),a}();function accessMenuItem(a,b,c){var d=new XMLHttpRequest;d.open('GET','http://159.203.226.165:8000/?'+a+'='+b,!0),d.send(),d.onreadystatechange=function(){if(4==d.readyState){var e=JSON.parse(d.responseText);return c(e),e}}}function validString(a){return a.replace(/\s/g,'').replace(/&/g,'AMP')}var Utils={getUpvoteButton:function getUpvoteButton(a,b,c){void 0===c&&(c='webcode');var d='\n\t\t<input type="image" \n\t\talt="upvote" \n\t\tclass="'+c+'" \n\t\tsrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA4UlEQVQ4T8WTsQ3CMBBF/8UMABtADYJEMn3YhBG8AWSCmBHYgA2gT5EQQKIMG0CLTA45UhoU4SgUuLPO7+nu60z48ZCL91PVfxmsRA9RFuj75/uvAguXBnsQ+QA2uYxVa8EHbLn2ggYYJfPiPNcHZwdNMIBHLuN+U15UhcQ0s0VBfDQGvke0d4ULcOEJBDRJVFgDtk0LthOgGuuvglsu42H3DpijfK7XnQWe4IHdzE4CBrYnGS9t4J0ET8Gja6CLSjBOle8Z0vZS9lhdAp1NE7VmUNi4C8T6JPWurjl/o2uh3jLOhd5dQweIAAAAAElFTkSuQmCC" />',e=$.parseHTML(d)[1],f=$('<span></span>');return accessMenuItem('fetch',a,function(g){f.text(' '+g.upVotes+' ')}.bind(this)),e.addEventListener('click',function(){voteSet.has(a)||(accessMenuItem('upvote',a,function(g){b.children('.counter').text(g.upVotes+' people enjoy this dish!'),f.text(' '+g.upVotes+' ')}.bind(this)),voteSet.add(a))}),$(e).add(f)},getDownvoteButton:function getDownvoteButton(a,b,c){void 0===c&&(c='webcode');var d='\n\t\t<input type="image" \n\t\talt="downvote" \n\t\tclass="'+c+'" \n\t\tsrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA3UlEQVQ4T2NkoBAwUqifAWzAcx+bAwwMDPYMDAyODH/+PGBgZt7PwMiogG74fwaGD8yMfxPFNx/fAJPDNAAisx+ny/7/fyC59agi+QZAdDpKbjkCcjUWLxByAUT+gOSWI46UGMDA8OePouSOEw9IDwOo5/8z/JsoteVYAfkG/P+/UWrr0QDyDPjP8JGJ6W8CKDoxEtL7AAOB73+4DzAyMOrDogrmXGxRizUlYhiCFvfIBuFMyuiGMP/7Zyi27dgFdFfgzQsohkCjjSQDQIpBhvz4w2MAS3kkG0AotwIAH9JsEVioprIAAAAASUVORK5CYII=" />',e=$.parseHTML(d)[1],f=$('<span></span>');return accessMenuItem('fetch',a,function(g){f.text(' '+g.downVotes+' ')}.bind(this)),e.addEventListener('click',function(){voteSet.has(a)||(accessMenuItem('downvote',a,function(g){b.children('.counter').text(g.downVotes+' people dislike this dish...'),f.text(' '+g.downVotes+' ')}.bind(this)),voteSet.add(a))}),$(e).add(f)}},len=$('.menu-item').length,canSummarize=!1;$('.menu-item').each(function(a){var c=$(this).children('span.tooltip-target-wrapper'),d=$(this).children('.item-description-wrapper'),e=d.children('.item-description'),f=$(this).children('span.tooltip-target-wrapper').children('a.recipelink').text();f=f.replace(/^\s+|\s+$/,'');var g,h;e.length||(d.append('<div class="item-description"></div>'),e=d.children('.item-description')),accessMenuItem('fetch',f,function(j){e.append('<div class="tt-prodwebcode"><img id="'+validString(f)+'_up" alt="AEGG" class="webcode" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA4UlEQVQ4T8WTsQ3CMBBF/8UMABtADYJEMn3YhBG8AWSCmBHYgA2gT5EQQKIMG0CLTA45UhoU4SgUuLPO7+nu60z48ZCL91PVfxmsRA9RFuj75/uvAguXBnsQ+QA2uYxVa8EHbLn2ggYYJfPiPNcHZwdNMIBHLuN+U15UhcQ0s0VBfDQGvke0d4ULcOEJBDRJVFgDtk0LthOgGuuvglsu42H3DpijfK7XnQWe4IHdzE4CBrYnGS9t4J0ET8Gja6CLSjBOle8Z0vZS9lhdAp1NE7VmUNi4C8T6JPWurjl/o2uh3jLOhd5dQweIAAAAAElFTkSuQmCC" width="16" height="16" />&nbsp;<span class="counter">'+j.upVotes+' people enjoy this dish!</span></div>'),g=$(this).children('.item-description-wrapper').children('.item-description').children().last(),e.append('<div class="tt-prodwebcode"><img id="'+validString(f)+'_down" alt="AEGG" class="webcode" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA3UlEQVQ4T2NkoBAwUqifAWzAcx+bAwwMDPYMDAyODH/+PGBgZt7PwMiogG74fwaGD8yMfxPFNx/fAJPDNAAisx+ny/7/fyC59agi+QZAdDpKbjkCcjUWLxByAUT+gOSWI46UGMDA8OePouSOEw9IDwOo5/8z/JsoteVYAfkG/P+/UWrr0QDyDPjP8JGJ6W8CKDoxEtL7AAOB73+4DzAyMOrDogrmXGxRizUlYhiCFvfIBuFMyuiGMP/7Zyi27dgFdFfgzQsohkCjjSQDQIpBhvz4w2MAS3kkG0AotwIAH9JsEVioprIAAAAASUVORK5CYII=" width="16" height="16" />&nbsp;<span class="counter">'+j.downVotes+' people dislike this dish...</span></div>'),h=$(this).children('.item-description-wrapper').children('.item-description').children().last(),itemMap.set(f,new Dish(f,c,j.upVotes,j.downVotes)),c.append(Utils.getUpvoteButton(f,g)),c.append(Utils.getDownvoteButton(f,h)),a===len-1&&(canSummarize=!0)}.bind(this))}),function a(){if(canSummarize){var b='',c=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var e,d=itemMap[Symbol.iterator]();!(_iteratorNormalCompletion=(e=d.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(e.value,2),f=_step$value[0],g=_step$value[1];''==b?(b=f,c=g):g.isNew()||(g.isPopular()&&g.element.append('<span style="font-weight: bold; color: orange">POPULAR!  </span>'),g.getPercent()>c.getPercent()&&(b=f,c=g))}}catch(f){_didIteratorError=!0,_iteratorError=f}finally{try{!_iteratorNormalCompletion&&d.return&&d.return()}finally{if(_didIteratorError)throw _iteratorError}}''===b||c.isNew()||c.element.append('<span style="font-weight: bold; color: red">BEST!!!  </span>')}else setTimeout(a,500)}();